<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="content">
        <script src="http://maps.google.com/maps/api/js?sensor=false&amp;v=3.4" type="text/javascript"></script>
        <div class="Container100">
            <div class="ContainerIndent">
                <div class="Card ShadowEffect  ">
                    <div class="Container100">
                        <div class="ContainerIndent">
        <h:panelGrid columns="1" cellpadding="0" >           
            <p:gmap widgetVar="w_gmap" center="36.890257,30.707417" zoom="13" type="HYBRID" 
                    style="width:1500px;height:800px"
                    model="#{eventList.simpleModel}"                                
                    >
                <p:ajax event="overlaySelect" listener="#{eventList.onMarkerSelect}" />

                <p:gmapInfoWindow id="infoWindow">
                    <p:outputPanel style="text-align: center; display: block; margin: auto">
                        <p:panelGrid>
                            <p:row>
                                <p:column><h:outputText value="#{eventList.marker.data.title}"/></p:column>
                                <p:column>Ocena xxx</p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="2">
                                    <h:outputText value="#{eventList.marker.data.opis}" />            
                                </p:column>
                            </p:row>
                        </p:panelGrid>    
                    </p:outputPanel>
                </p:gmapInfoWindow>
            </p:gmap> 


            <script type="text/javascript">
                if (navigator.geolocation) {
                    checkGeolocationByHTML5();
                } else {
                    checkGeolocationByLoaderAPI(); // HTML5 not supported! Fall back to Loader API.
                }

                function checkGeolocationByHTML5() {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        setMapCenter(position.coords.latitude, position.coords.longitude);
                    }, function () {
                        checkGeolocationByLoaderAPI(); // Error! Fall back to Loader API.
                    });
                }

                function checkGeolocationByLoaderAPI() {
                    if (google.loader.ClientLocation) {
                        setMapCenter(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
                    } else {
                        // Unsupported! Show error/warning?
                    }
                }

                function setMapCenter(latitude, longitude) {
                    PF('w_gmap').getMap().setCenter(new google.maps.LatLng(latitude, longitude));
                }
            </script>

        </h:panelGrid>

  </div></div></div></div></div>

    </ui:define>

</ui:composition>