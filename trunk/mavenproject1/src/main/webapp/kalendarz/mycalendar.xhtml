<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>        
        <script src="http://maps.google.com/maps/api/js?sensor=false&amp;v=3.4" type="text/javascript"></script>
    </h:head>

    <ui:composition template="/templates/maintemplate.xhtml">

        <ui:define name="west">
            xxxxxx
        </ui:define>


        <ui:define name="body">            
            <p:tabView dynamic="true" cache="true">
                <p:tab title="Podsumowanie">
                    <h:panelGrid columns="2" cellpadding="10">                        
                        <h:outputText
                            value="The story begins as Don Vito Corleone..." />
                        <h:outputText
                            value="The story begins as Don Vito Corleone..." />
                    </h:panelGrid>
                </p:tab>
                <p:tab title="Lista">
                    <h:panelGrid columns="2" cellpadding="10">                        
                        <h:outputText value="A tu scroll o ostatnio zaktualizowanych albo info o selectowanym" />
                        <h:form id="form">
                            <p:dataTable var="event" value="#{eventList.events}" 
                                         widgetVar="eventsTable"
                                         emptyMessage="No cars found with given criteria"
                                         rows="10" paginator="true">
                                <f:facet name="header">
                                    <p:outputPanel>
                                        <h:outputText value="Search all fields:" />
                                        <p:inputText id="globalFilter" onkeyup="PF('eventsTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                                    </p:outputPanel>
                                </f:facet>                            
                                <p:column headerText="Impreza">
                                    <h:outputText value="#{event.title}" />
                                </p:column>
                                <p:column headerText="Początek">
                                    <h:outputText value="#{event.startDate}" />
                                </p:column>    
                                <p:column headerText="Miejsce">
                                    <h:outputText value="#{event.adres}" />
                                </p:column>       
                                <p:column headerText="Typ wydarzenia" filterBy="#{event.typWydarzenia}" filterMatchMode="equals">
                                    <f:facet name="filter">
                                        <p:selectOneButton onchange="PF('eventsTable').filter()">
                                            <f:converter converterId="javax.faces.Boolean" />
                                            <f:selectItem itemLabel="Wszystkie" itemValue="" />
                                            <f:selectItem itemLabel="Triathlon" itemValue="t" />
                                            <f:selectItem itemLabel="Kolarstwo" itemValue="k" />
                                            <f:selectItem itemLabel="Bieganie" itemValue="b" />
                                        </p:selectOneButton>   
                                    </f:facet>
                                    <h:outputText value="#{event.typWydarzenia}" />
                                </p:column>                                   
                                <p:column headerText="Cechy">
                                    <h:outputText value="#{event.title}" />
                                </p:column>  
                                <p:column style="width:32px;text-align: center">

                                    <p:commandButton update=":form:eventDetail" oncomplete="PF('eventDialog').show()" icon="ui-icon-search" title="View">
                                        <f:setPropertyActionListener value="#{event}" target="#{eventList.selectedEvent}" />
                                    </p:commandButton>
                                </p:column>                                    
                            </p:dataTable>     
                            <p:dialog header="Event Info" widgetVar="eventDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                                    <p:outputPanel id="eventDetail" style="text-align:center;">
                                        xxxx
                                    </p:outputPanel>    
                                </p:dialog>    
                        </h:form>     
                    </h:panelGrid>
                </p:tab>
                <p:tab title="Mapa wydarzeń">
                    <h:panelGrid columns="2" cellpadding="10">                        
                        <h:outputText value="After a break of more than 15 years..." />
                        <h:outputText value="After a break of more than 15 years..." />
                    </h:panelGrid>
                </p:tab>
            </p:tabView>
        </ui:define>
    </ui:composition>
</html>