<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="content">

        <f:facet name="last">
            <h:outputStylesheet library="css" name="mycustom.css" />
        </f:facet>
        <h:form id="form" >
            <p:growl id="msgs" showDetail="true"  />
            <div class="Container100 ui-fluid">
                <div class="ContainerIndent">
                    <div class="Card ShadowEffect"> 
                        <p:tabView>
                            <p:tab title="Nadchodzące"> 
                                <h:panelGrid columns="2" columnClasses="alignTop,alignTop" styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;">



                                    <p:dataTable value="#{todayTrainingController.getEventyWplanie(loginbean.uname)}" 
                                                 var="displayeventinfo" 
                                                 widgetVar="usereventsNWidget"
                                                 id="eventsTableN"
                                                 paginator="true"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"                                                 
                                                 paginatorPosition="top"
                                                 rows="30"> 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect}" 
                                                update="@([id$=opisTreninguPG])" />

                                        <p:column headerText="ID" style="width:20px;" >
                                            #{displayeventinfo.id}
                                        </p:column> 
                                        <p:column headerText="Nazwa kalendarza" style="width:100px;">
                                            #{displayeventinfo.calendarname} 
                                        </p:column>
                                        <p:column filterBy="#{displayeventinfo.typWydarzenia}" style="width:150px;" filterMatchMode="equals">
                                            <f:facet name="filter">
                                                <p:selectOneListbox onchange="PF('usereventsNWidget').filter()">                                                
                                                    <f:selectItem itemLabel="Kolarstwo" itemValue="1" />
                                                    <f:selectItem itemLabel="Pływanie" itemValue="2" />
                                                    <f:selectItem itemLabel="Bieganie" itemValue="3" />
                                                    <f:selectItem itemLabel="Dowolne" itemValue="" />
                                                </p:selectOneListbox>   
                                            </f:facet>

                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                        </p:column>
                                        <p:column headerText="Tytul" filterBy="#{displayeventinfo.eventTitle}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventTitle} 
                                        </p:column>

                                        <p:column headerText="Dystans" >
                                            #{displayeventinfo.dystans} 
                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventOpis} 
                                        </p:column>
                                        <p:column headerText="Data rozpoczęcia" sortBy="#{displayeventinfo.dataod}" >
                                            <h:outputText value="#{displayeventinfo.dataod}">
                                                <f:convertDateTime type="date" pattern="EEEEEEEE, dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Kalendarz publiczny?" >                                            
                                            <p:inputSwitch value="#{displayeventinfo.isCalendarPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>
                                        <p:column headerText="Wydarzenie publiczne?" >                                           
                                            <p:inputSwitch value="#{displayeventinfo.isEventPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>

                                    </p:dataTable> 

                                    <p:panel id ="opisTreninguPG"   style="width:700px;border:0px none;">
                                        <div class="Card ShadowEffect ui-fluid"> 
                                                <p:commandButton value="Oznacz jako publiczne wydarzenie" id="publiczneBtn"
                                                                 icon="fa fa-external-link Fs30  White"
                                                                 styleClass="Fs30  LeadenGreenBack RaisedButton"                                                                                 
                                                                 actionListener="#{todayTrainingController.zapiszZmiany()}" update="@all"  />                                                       
                                         
                                        </div>
                                        <div class="Card ShadowEffect ui-fluid">   
                                            <p:tabView widgetVar="mywidgetvar" >
                                                <p:tab title="Trening">
                                                    <p:panelGrid  id="opisTren" styleClass="ui-panelgrid-blank"
                                                                  style="border:0px none; background-color:transparent;">
                                                        <p:row>
                                                            <p:column colspan="2"><p:commandButton value="Zapisz zmiany" id="zapiszBtn"
                                                                                                   icon="fa fa-save  Fs30 White"
                                                                                                   styleClass="Fs30 LeadenGreenBack RaisedButton"
                                                                                                   actionListener="#{todayTrainingController.zapiszZmiany()}"
                                                                                                   update="@all"  />
                                                            </p:column>
                                                        </p:row>


                                                        <p:row>
                                                            <p:column>
                                                                <p:outputLabel for="completedBB" value="Wykonanie" />                                                  
                                                            </p:column>
                                                            <p:column>                                                               
                                                                <p:inputSwitch id="completedBB"  value="#{todayTrainingController.rezultatTreningu.completed}" 
                                                                               offLabel="Nie" onLabel="Tak"/>                                                                
                                                            </p:column>
                                                        </p:row>


                                                        <p:row>
                                                            <p:column><p:outputLabel for="link" value="Ling do treningu" /></p:column>
                                                            <p:column><p:inputText id="link" value="#{todayTrainingController.rezultatTreningu.link}">
                                                                    <p:watermark for="link" value="Link do treningu z zewnętrznego serwisu np Strava" />
                                                                </p:inputText></p:column>
                                                        </p:row>

                                                        <p:row>
                                                            <p:column><p:outputLabel for="uwagi" value="Uwagi" /></p:column>
                                                            <p:column><p:editor id="uwagi" value="#{todayTrainingController.rezultatTreningu.uwagi}"/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="2"><h3>Dodatkowe informacje</h3><hr/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column><p:outputLabel for="duration" value="Czas trwania" /></p:column>
                                                            <p:column><p:inputText id="duration" value="#{todayTrainingController.rezultatTreningu.duration}"/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column>  <p:outputLabel for="distance" value="Dystans" /></p:column>
                                                            <p:column><p:outputLabel id="distance" value="#{todayTrainingController.rezultatTreningu.distance}"/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column> <p:outputLabel for="kalorie" value="Spalone kalorie" /></p:column>
                                                            <p:column><p:inputText id="kalorie"  value="#{todayTrainingController.rezultatTreningu.kalorie}"/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="2"><h3>Podgląd treningu</h3><hr/></p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="2"><p:editor id="uwagi2" 
                                                                                            value="#{todayTrainingController.myEvent.opis}"
                                                                                            disabled="true"
                                                                                            /></p:column>
                                                        </p:row>

                                                    </p:panelGrid>   
                                                </p:tab>
                                                <p:tab title="Zaproś znajomych">

                                                </p:tab>

                                            </p:tabView>
                                        </div>
                                    </p:panel>

                                </h:panelGrid>

                            </p:tab>
                            <p:tab title="Zrealizowane">
                                <h:panelGrid columns="2" columnClasses="alignTop,alignTop"
                                             styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;">
                                    <p:dataTable value="#{todayTrainingController.getEventyUzytkownika(loginbean.uname)}" 
                                                 var="displayeventinfo"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"
                                                 resizableColumns="true"
                                                 paginator="true"
                                                 paginatorPosition="top"
                                                 id="eventsTableZ"
                                                 widgetVar="usereventsZWidget"
                                                 rows="30"
                                                 > 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect}" 
                                                update="@([id$=opisTreninguWP])" />
  
                                        <p:column headerText="ID" style="width:20px;" >
                                            #{displayeventinfo.id}
                                        </p:column> 
                                      
                                        <p:column headerText="Nazwa kalendarza" style="width:100px;">
                                            #{displayeventinfo.calendarname} 
                                        </p:column>
                                        <p:column filterBy="#{displayeventinfo.typWydarzenia}" style="width:150px;" filterMatchMode="equals">
                                            <f:facet name="filter">
                                                <p:selectOneListbox onchange="PF('usereventsNWidget').filter()">                                                
                                                    <f:selectItem itemLabel="Kolarstwo" itemValue="1" />
                                                    <f:selectItem itemLabel="Pływanie" itemValue="2" />
                                                    <f:selectItem itemLabel="Bieganie" itemValue="3" />
                                                    <f:selectItem itemLabel="Dowolne" itemValue="" />
                                                </p:selectOneListbox>   
                                            </f:facet>

                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                        </p:column>
                                        <p:column headerText="Tytul" filterBy="#{displayeventinfo.eventTitle}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventTitle} 
                                        </p:column>

                                        <p:column headerText="Dystans" >
                                            #{displayeventinfo.dystans} 
                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventOpis} 
                                        </p:column>
                                        <p:column headerText="Data rozpoczęcia" sortBy="#{displayeventinfo.dataod}" >
                                            <h:outputText value="#{displayeventinfo.dataod}">
                                                <f:convertDateTime type="date" pattern="EEEEEEEE, dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Kalendarz publiczny?" >                                            
                                            <p:inputSwitch value="#{displayeventinfo.isCalendarPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>
                                        <p:column headerText="Wydarzenie publiczne?" >                                           
                                            <p:inputSwitch value="#{displayeventinfo.isEventPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>
                                    </p:dataTable>

                                    <p:panel id ="opisTreninguWP"   style="width:700px;border:0px none;">
                                        #{todayTrainingController.selectedEventInfo.uwagiDoTreningu}
                                    </p:panel>       



                                </h:panelGrid>
                            </p:tab>
                            <p:tab title="Komentarze">

                            </p:tab>
                        </p:tabView>    



                    </div>
                </div>
            </div>

        </h:form>    

    </ui:define>

</ui:composition>