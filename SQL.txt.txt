
CREATE TABLE users
(
  uid serial NOT NULL,
  uname character varying(60) NOT NULL,
  password character varying(60) NOT NULL,
  email text,
  user_type_id integer,
  hashcode text,
  state text,
  city text,
  r_val integer default 0,
  b_val integer default 0,
  s_val integer default 0,
  t_val integer default 0,
  CONSTRAINT users_pkey PRIMARY KEY (uid)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE users OWNER TO postgres;


CREATE TABLE events
(
  id serial NOT NULL,
  klient_id integer,
  tytul text,
  opis text,
  czycalydzien boolean DEFAULT false,
  czypubliczne boolean DEFAULT true,
  dataod timestamp with time zone,
  datado timestamp with time zone,
  przesuniecie text,
  typ_przesuniecia integer,
  gmap_cords text,
  keywords text,
  event_id text,
  cdate date DEFAULT now(),
  mdate date DEFAULT now(),
  adres text,
  typ_wydarzenia text,
  rating numeric(5,2),
  CONSTRAINT event_pkey PRIMARY KEY (id),
  CONSTRAINT eventklient_id_fkey FOREIGN KEY (klient_id)
      REFERENCES klient (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE events OWNER TO postgres;
alter table events add column adres text;
alter table events add column typ_wydarzenia text;

create table userevents(
uid serial NOT NULL,
user_id integer  REFERENCES users (uid),
event_id integer REFERENCES events (id),
stan integer default 0,
CONSTRAINT userevents_pkey PRIMARY KEY (uid)
)

create table calendars(
uid serial unique not null,
name text,
ispublic boolean default true,
CONSTRAINT calendars_pkey PRIMARY KEY (uid)
);

create table usercalendars(
uid serial unique NOT NULL,
userid integer REFERENCES users (uid),
calendarid integer REFERENCES calendars (uid),
CONSTRAINT usercalendars_pkey PRIMARY KEY (uid)
);

CREATE TABLE calendarevents
(
  uid serial unique not null,
  calenarid integer REFERENCES calendars (uid),
  eventid integer REFERENCES events (id),
  CONSTRAINT calendarevents_pkey PRIMARY KEY (uid)
);
 

alter table events alter column datado type timestamp with time zone

alter table events alter column dataod type timestamp with time zone


--reszta tabel jest smieciowa--


CREATE TABLE klient
(
  id serial NOT NULL  PRIMARY KEY,
  imie text,
  nazwisko text,
  email text,
  login text,
  cdate date DEFAULT now()
)
WITH (
  OIDS=FALSE
);
ALTER TABLE klient OWNER TO postgres;

create table grupy_treningowe(
id serial NOT NULL  PRIMARY KEY,
owner_id integer REFERENCES klient (id),
nazwa text,
cdate date default now()
);





drop table event




ALTER TABLE klient ADD COLUMN "password" text;


create table workouts(
id serial unique not null,
title text,
date_from date,
date_to date,
date_shift text,
shit_type text,
gmap_cords text,
is_allday boolean default false,
is_public boolean default false,
keywords  text,
is_toremind boolean default false,
cuser integer,
cdate date default now(),
mdate date default now(),
CONSTRAINT workouts_pkey PRIMARY KEY (id)
)
