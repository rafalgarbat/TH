<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="content">

        <f:facet name="last">
            <h:outputStylesheet library="css" name="mycustom.css" />
        </f:facet>

        <p:growl id="msgs" showDetail="true"  />
        <div class="Container100 ui-fluid">
            <div class="ContainerIndent">
                <div class="Card ShadowEffect"> 
                    <p:tabView>
                        <p:tab title="Nadchodzące"> 
                            <h:form id="form1" >
                                <h:panelGrid columns="2" columnClasses="alignTop,alignTop"
                                             styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;">



                                    <p:dataTable value="#{todayTrainingController.getEventyWplanie(loginbean.uname)}" 
                                                 var="displayeventinfo" 
                                                 widgetVar="usereventsNWidget"
                                                 id="eventsTableN"
                                                 paginator="true"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"                                                 
                                                 paginatorPosition="top"
                                                 emptyMessage="Nie znaleziono żadnych wydarzeań"
                                                 rows="30"> 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect2}" 
                                                update="@([id$=opisTreninguPG])" />

                                        <p:column headerText="ID" style="width:40px;" filterBy="#{displayeventinfo.id}" >
                                            #{displayeventinfo.id}
                                        </p:column> 
                                        <p:column headerText="Data rozpoczęcia" style="width:150px;" >
                                            <h:outputText value="#{displayeventinfo.dataod}" styleClass="Fs22">
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy EEEEEEEE" />


                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Nazwa kalendarza" style="width:100px;" filterBy="#{displayeventinfo.calendarname}" >
                                            <h:outputText value="#{displayeventinfo.calendarname}" styleClass="Fs22"/>
                                        </p:column>
                                        <p:column filterBy="#{displayeventinfo.typWydarzenia}" style="width:150px;" filterMatchMode="equals">
                                            <f:facet name="filter">
                                                <p:selectOneListbox onchange="PF('usereventsNWidget').filter()">                                                
                                                    <f:selectItem itemLabel="Kolarstwo" itemValue="1" />
                                                    <f:selectItem itemLabel="Pływanie" itemValue="2" />
                                                    <f:selectItem itemLabel="Bieganie" itemValue="3" />
                                                    <f:selectItem itemLabel="Dowolne" itemValue="" />
                                                </p:selectOneListbox>   
                                            </f:facet>
                                            <div class="TexAlCenter"> 
                                                <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                                <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                                <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                            </div>
                                        </p:column>
                                        <p:column headerText="Tytuł" filterBy="#{displayeventinfo.eventTitle}" style="width:200px;" 
                                                  filterMatchMode="contains"  styleClass="Fs22">
                                            <h:outputText value="#{displayeventinfo.eventTitle}"/> 
                                        </p:column>

                                        <p:column headerText="Dystans" style="width:100px;" >
                                            <h:outputText value="#{displayeventinfo.dystans}"/> 

                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" style="width:400px;" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventOpis} 
                                        </p:column>

                                        <p:column headerText="Kalendarz publiczny?" style="width:65px;"  >                                            
                                            <div class="TexAlCenter"> 
                                                <p:panel style="border-style: hidden !important; background: transparent" 
                                                         visible="#{displayeventinfo.isCalendarPublic==true}">
                                                    <i id="customheader" class="fa fa-check-circle Blue Fs30 "/>                                                 
                                                </p:panel>
                                                <p:panel style="border-style: hidden !important; background: transparent" 
                                                         visible="#{displayeventinfo.isCalendarPublic==false}">
                                                    <i id="customheader" class="fa fa-check-circle Blue Fs30 "/>                                                 
                                                </p:panel>
                                            </div>
                                        </p:column>
                                        <p:column headerText="Wydarzenie publiczne?" style="width:65px;">  
                                            <div class="TexAlCenter"> 
                                                <p:panel style="border-style: hidden !important; background: transparent" 
                                                         visible="#{displayeventinfo.isEventPublic==true}">
                                                    <i id="customheader" class="fa fa-check-circle Blue Fs30 "/>                                                 
                                                </p:panel>                                            
                                                <p:panel style="border-style: hidden !important; background: transparent" 
                                                         visible="#{displayeventinfo.isEventPublic==false}">
                                                    <i id="customheader" class="fa fa-close Red Fs30 "/>                                                 
                                                </p:panel>   
                                            </div>
                                        </p:column>

                                    </p:dataTable> 


                                    <p:panel id ="opisTreninguPG"   style="width:700px;border:0px none;" visible="#{todayTrainingController.selectedEventInfo !=null}">
                                        <div class=" ShadowEffect ui-fluid"> 

                                            <p:panelGrid styleClass="ui-panelgrid-blank" columns="3"
                                                         columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4">

                                                <p:commandButton value="Zapisz trening" id="zapiszBtn"
                                                                 icon="fa fa-save  Fs20 White"
                                                                 styleClass="Fs30 PurpleButton RaisedButton"
                                                                 actionListener="#{todayTrainingController.zapiszZmiany()}"
                                                                 update="@all"  />

                                                <p:commandButton value="Zaproś znajomych" id="zapiszBt333"
                                                                 icon="fa fa-save  Fs20 White"
                                                                 styleClass="Fs30 CyanButton RaisedButton"
                                                                 actionListener="#{todayTrainingController.zapiszZmiany()}"
                                                                 update="@all"  />
                                                <p:commandButton value="Oznacz jako wydarzenie" id="publiczneBtn"
                                                                 icon="fa fa-external-link Fs20  White"
                                                                 styleClass="Fs30  BrownButton RaisedButton"                                                                                 
                                                                 actionListener="#{todayTrainingController.oznaczJakoPubliczne()}" update="@all"  /> 

                                            </p:panelGrid>    





                                        </div>
                                        <div class="Card ShadowEffect ui-fluid">   

                                            <p:panelGrid  id="opisTren" styleClass="ui-panelgrid-blank"
                                                          style="border:0px none; background-color:transparent;">



                                                <p:row>
                                                    <p:column>
                                                        <p:outputLabel for="completedBB" value="Wykonanie" styleClass="Fs30"/>                                                  
                                                    </p:column>
                                                    <p:column>                                                               
                                                        <p:inputSwitch id="completedBB"  value="#{todayTrainingController.rezultatTreningu.completed}" 
                                                                       offLabel="Nie" onLabel="Tak"/>                                                                
                                                    </p:column>
                                                </p:row>


                                                <p:row>

                                                    <p:column colspan="2"><p:inputText id="link" value="#{todayTrainingController.rezultatTreningu.link}">
                                                            <p:watermark for="link" value="Link do treningu z zewnętrznego serwisu np Strava" />
                                                        </p:inputText></p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2"><h3>Uwagi i komentarze</h3><hr/></p:column>
                                                </p:row>    
                                                <p:row>                                                                                                                         
                                                    <p:column colspan="2">
                                                        <p:editor id="uwagi" value="#{todayTrainingController.rezultatTreningu.uwagi}"/>                                                                                                                                    
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2"><h3>Dodatkowe informacje</h3><hr/></p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column><p:outputLabel for="duration" value="Czas trwania" styleClass="Fs30"/></p:column>
                                                    <p:column>
                                                        <p:spinner id="duration" value="#{todayTrainingController.rezultatTreningu.duration}" suffix="min" stepFactor="5" min="0" /> 
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column>  <p:outputLabel for="distance" value="Dystans" styleClass="Fs30"/></p:column>
                                                    <p:column><p:spinner id="distance" value="#{todayTrainingController.rezultatTreningu.distance}" stepFactor="0.10" min="0" suffix=" km"  /></p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column> <p:outputLabel for="kalorie" value="Spalone kalorie" styleClass="Fs30"/></p:column>
                                                    <p:column><p:spinner id="kalorie"  value="#{todayTrainingController.rezultatTreningu.kalorie}" stepFactor="5" min="0" />
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2"><h3>Zadanie treningowe</h3><hr/></p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="2"><p:editor id="uwagi2" 
                                                                                    value="#{todayTrainingController.myEvent.opis}"
                                                                                    disabled="true"
                                                                                    /></p:column>
                                                </p:row>

                                            </p:panelGrid>   

                                        </div>
                                    </p:panel>

                                </h:panelGrid>
                            </h:form>
                        </p:tab>
                        <p:tab title="Zrealizowane">
                            <h:form id="zrealizowaneFrm"> 
                                <h:panelGrid columns="2"                                              
                                             columnClasses="ui-grid-col-10,ui-grid-col-2"
                                             styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;"
                                             >

                                    <p:dataTable value="#{todayTrainingController.getEventyUzytkownika(loginbean.uname)}" 
                                                 var="displayeventinfo"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"
                                                 resizableColumns="true"
                                                 paginator="true"
                                                 paginatorPosition="top"
                                                 id="eventsTableZ"
                                                 widgetVar="usereventsZWidget"
                                                 rows="30"
                                                 > 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect}" 
                                                update="@([id$=opisTreninguWP])" />

                                        <p:column headerText="ID" style="width:40px;" filterBy="#{displayeventinfo.id}">
                                            #{displayeventinfo.id}                                          
                                        </p:column> 
                                        <p:column headerText="Data rozpoczęcia" style="width:100px;" >
                                            <h:outputText value="#{displayeventinfo.dataod}" styleClass="Fs22">
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Kalendarz" style="width:100px;">
                                        
                                                <h:outputText value="#{displayeventinfo.calendarname}" styleClass="Fs22"/>
                                        </p:column>
                                        <p:column filterBy="#{displayeventinfo.typWydarzenia}" style="width:150px;" filterMatchMode="equals">
                                            <f:facet name="filter">
                                                <p:selectOneListbox onchange="PF('usereventsNWidget').filter()">                                                
                                                    <f:selectItem itemLabel="Kolarstwo" itemValue="1" />
                                                    <f:selectItem itemLabel="Pływanie" itemValue="2" />
                                                    <f:selectItem itemLabel="Bieganie" itemValue="3" />
                                                    <f:selectItem itemLabel="Dowolne" itemValue="" />
                                                </p:selectOneListbox>   
                                            </f:facet>
                                            <div class="TexAlCenter"> 
                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                            </div>
                                        </p:column>
                                        <p:column headerText="Tytul" filterBy="#{displayeventinfo.eventTitle}"  style="width:200px;"
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventTitle} 
                                        </p:column>

                                        <p:column headerText="Dystans" style="width:65px;" >
                                            #{displayeventinfo.dystans} 
                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" style="width:600px;"
                                                  filterMatchMode="contains">
                                            <p:inputTextarea value="#{displayeventinfo.eventOpis}" 
                                                             cols="90" rows="3"
                                                             disabled="true"/> 
                                        </p:column>
                                      
                                    </p:dataTable>
                                    <p:panel id ="opisTreninguWP"  >
                                        <p:button href="#{todayTrainingController.selectedEventInfo.publicUrl}" 
                                                  value="Przejdź na strone wydarzenia" 
                                                  icon="fa fa-external-link Fs20  White"
                                                  styleClass="Fs30  BrownButton RaisedButton"  
                                                  rendered="#{todayTrainingController.selectedEventInfo.id>0}"/>
                                    </p:panel> 




                                </h:panelGrid>
                            </h:form>
                        </p:tab>
                        <p:tab title="Zaproszenia">
                            <h:form id="zaproszeniaFrm">
                                <h:panelGrid columns="2" columnClasses="ui-grid-col-10,ui-grid-col-2"
                                             styleClass="ui-panelgrid-blank" 
                                             style="width: 100%; border:0px ; background-color:transparent;">

                                    <p:dataTable value="#{todayTrainingController.getEventyWplanie(loginbean.uname)}" 
                                                 var="displayeventinfo" 
                                                 widgetVar="usereventsIWidget"
                                                 id="eventsTableI"
                                                 paginator="true"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"                                                 
                                                 paginatorPosition="top"
                                                 rows="30"> 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect2}" 
                                                update="@([id$=opisTreninguIG])" />

                                        <p:column headerText="ID" style="width:40px;" filterBy="#{displayeventinfo.id}"  >
                                            #{displayeventinfo.id}
                                        </p:column> 

                                        <p:column headerText="Organizator" style="width:80px;" >
                                            #{displayeventinfo.eventCreateUserInfo}
                                        </p:column>                                         

                                        <p:column filterBy="#{displayeventinfo.typWydarzenia}" style="width:150px;" filterMatchMode="equals">
                                            <f:facet name="filter">
                                                <p:selectOneListbox onchange="PF('usereventsNWidget').filter()">                                                
                                                    <f:selectItem itemLabel="Kolarstwo" itemValue="1" />
                                                    <f:selectItem itemLabel="Pływanie" itemValue="2" />
                                                    <f:selectItem itemLabel="Bieganie" itemValue="3" />
                                                    <f:selectItem itemLabel="Dowolne" itemValue="" />
                                                </p:selectOneListbox>   
                                            </f:facet>

                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                        </p:column>
                                        <p:column headerText="Tytul" filterBy="#{displayeventinfo.eventTitle}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventTitle} 
                                        </p:column>

                                        <p:column headerText="Treść zaproszenia" >
                                            #{displayeventinfo.eventInvitation}
                                        </p:column> 

                                        <p:column headerText="Dystans" >
                                            #{displayeventinfo.dystans} 
                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventOpis}                                  
                                            />
                                        </p:column>

                                        <p:column headerText="Zapisy od" sortBy="#{displayeventinfo.dataod}" >
                                            <h:outputText value="#{displayeventinfo.dataod}">
                                                <f:convertDateTime type="date" pattern="EEEEEEEE, dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Data rozpoczęcia" sortBy="#{displayeventinfo.dataod}" >
                                            <h:outputText value="#{displayeventinfo.dataod}">
                                                <f:convertDateTime type="date" pattern="EEEEEEEE, dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Wydarzenie publiczne?" >                                           
                                            <p:inputSwitch value="#{displayeventinfo.isEventPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>

                                    </p:dataTable> 
                                    <p:panel id ="opisTreninguIG" style="width:300px;border:0px none;">
                                        <h:form id="form4" >
                                            <p:button href="#{todayTrainingController.selectedEventInfo.publicUrl}" 
                                                      styleClass="GreenButton Fs24"
                                                      value="Więcej informacji" rendered="#{todayTrainingController.selectedEventInfo.id>0}"/>
                                            <hr/>
                                            <p:button href="#{todayTrainingController.selectedEventInfo.publicUrl}" 
                                                      styleClass="OrangeButton Fs24"
                                                      value="Powiadom znajomych" rendered="#{todayTrainingController.selectedEventInfo.id>0}"/>
                                            <hr/>
                                            <p:button href="#{todayTrainingController.selectedEventInfo.publicUrl}" 
                                                      styleClass="CyanButton Fs24"
                                                      value="Weź udział" rendered="#{todayTrainingController.selectedEventInfo.id>0}"/>
                                            <hr/>
                                            <p:button href="#{todayTrainingController.selectedEventInfo.publicUrl}" 
                                                      styleClass="RedButton Fs24"
                                                      value="Odrzuć zaproszenie" rendered="#{todayTrainingController.selectedEventInfo.id>0}"/>
                                        </h:form>



                                    </p:panel>       

                                </h:panelGrid>
                            </h:form>
                        </p:tab>
                    </p:tabView>    



                </div>
            </div>
        </div>

    </ui:define>

</ui:composition>