<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="content">

        <f:facet name="last">
            <h:outputStylesheet library="css" name="mycustom.css" />
        </f:facet>
        <h:form id="form" >
            <p:growl id="msgs" showDetail="true"  />
            <div class="Container100 ui-fluid">
                <div class="ContainerIndent">
                    <div class="Card ShadowEffect"> 
                        <p:tabView>
                            <p:tab title="Nadchodzące"> 
                                <h:panelGrid columns="2" columnClasses="alignTop,alignTop" styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;">



                                    <p:dataTable value="#{todayTrainingController.getEventyWplanie(loginbean.uname)}" 
                                                 var="displayeventinfo" 
                                                 widgetVar="usereventsNWidget"
                                                 id="eventsTableN"
                                                 paginator="true"
                                                 selection="#{todayTrainingController.selectedEventInfo}"
                                                 rowKey="#{displayeventinfo.id}"
                                                 selectionMode="single"                                                 
                                                 paginatorPosition="top"
                                                 rows="30"> 
                                        <p:ajax event="rowSelect" 
                                                listener="#{todayTrainingController.onRowSelect}" 
                                                update="@([id$=opisTreninguPG])" />

                                        <p:column headerText="Akcje" style="width:130px;">
                                            <p:commandButton value="Zrealizowany!" icon="fa fa-check Fs16 White"  styleClass="SoftGreenBack" 
                                                             style="width: 130px;" iconPos="right"/>
                                            <p:commandButton value="Zrealizowany!" icon="fa fa-check Fs16 White"  styleClass="LeadenGreenBack" 
                                                             style="width: 130px;" iconPos="right"/>

                                        </p:column>
                                        <p:column headerText="Nazwa kalendarza" style="width:100px;">
                                            #{displayeventinfo.calendarname} 
                                        </p:column>
                                        <p:column headerText="Typ" style="width:75px;">                                            
                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{displayeventinfo.typWydarzenia==3}"/>
                                        </p:column>
                                        <p:column headerText="Tytul" filterBy="#{displayeventinfo.eventTitle}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventTitle} 
                                        </p:column>

                                        <p:column headerText="Dystans" >
                                            #{displayeventinfo.dystans} 
                                        </p:column>
                                        <p:column headerText="Opis"  filterBy="#{displayeventinfo.eventOpis}" 
                                                  filterMatchMode="contains">
                                            #{displayeventinfo.eventOpis} 
                                        </p:column>
                                        <p:column headerText="Data rozpoczęcia" sortBy="#{displayeventinfo.dataod}" >
                                            <h:outputText value="#{displayeventinfo.dataod}">
                                                <f:convertDateTime type="date" pattern="EEEEEEEE, dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Kalendarz publiczny?" >                                            
                                            <p:inputSwitch value="#{displayeventinfo.isCalendarPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>
                                        <p:column headerText="Wydarzenie publiczne?" >                                           
                                            <p:inputSwitch value="#{displayeventinfo.isEventPublic}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>

                                    </p:dataTable> 
                                    <p:panel id ="opisTreninguPG"   style="width: 600px;border:0px none;">
                                        <p:tabView>
                                            <p:tab title="Trening">
                                                <p:panelGrid columns="2" id="opisTren" styleClass="ui-panelgrid-blank"
                                                             style="width: 600px;border:0px none; background-color:transparent;">

                                                    <p:commandButton value="Zapisz" id="zapiszBtn"
                                                                     icon="fa fa-eyedropper Fs16 White" iconPos="right"
                                                                     styleClass="OrangeButton RaisedButton"
                                                                     actionListener="#{todayTrainingController.zapiszZmiany()}" update="@all"  />

                                                    <p:outputLabel  value=""    />
                                                    Trening #{todayTrainingController.selectedEventInfo.id} 
                                                    Pobrane #{todayTrainingController.myEvent.id} 


                                                    <p:outputLabel for="duration" value="duration" />
                                                    <p:inputMask id="duration"  mask="99.99"
                                                                 value="#{todayTrainingController.rezultatTreningu.duration}"/>

                                                   
  stan integer DEFAULT 0,
  distance text,
  kalorie text,
  uwagi text,
  link text,
  completed 
                                                    


                                                </p:panelGrid>   
                                            </p:tab>
                                            <p:tab title="Zaproszeni">

                                            </p:tab>

                                        </p:tabView>
                                    </p:panel>

                                </h:panelGrid>

                            </p:tab>
                            <p:tab title="Zrealizowane">
                                <h:panelGrid columns="2" columnClasses="alignTop,alignTop"
                                             styleClass="ui-panelgrid-blank" style="width: 100%; border:0px ; background-color:transparent;">
                                    <p:dataTable value="#{todayTrainingController.getMojeEventy(loginbean.uname)}" 
                                                 var="userevents"
                                                 selection="#{todayTrainingController.selectedUserEvent}"
                                                 rowKey="#{userevents.uid}"
                                                 selectionMode="single"
                                                 resizableColumns="true"
                                                 paginator="true"
                                                 paginatorPosition="top"
                                                 id="eventsTableZ"
                                                 widgetVar="usereventsZWidget"
                                                 rows="30"> 


                                        <p:column headerText="ID" style="width:20px;" >
                                            #{userevents.uid}
                                        </p:column> 
                                        <p:column headerText="Typ" style="width:75px;"> 
                                            <p:graphicImage library="images" name="bike.png" width="75px" height="75px" rendered="#{userevents.eventId.typ_wydarzenia==1}"/>
                                            <p:graphicImage library="images" name="swim.png" width="75px" height="75px" rendered="#{userevents.eventId.typ_wydarzenia==2}"/>
                                            <p:graphicImage library="images" name="run.png" width="75px" height="75px" rendered="#{userevents.eventId.typ_wydarzenia==3}"/>
                                        </p:column>

                                        <p:column headerText="#{userevents.eventId.dataod}" sortBy="#{userevents.eventId.dataod}" 
                                                  filterBy="#{userevents.eventId.dataod}" filterFunction="#{todayTrainingController.filterByDate}">
                                            <f:facet name="filter">
                                                <h:inputHidden id="filter" />
                                            </f:facet>
                                            <f:facet name="header">
                                                <p:outputLabel value="#{userevents.eventId.dataod}" />
                                                <br />
                                                <p:calendar id="from" pattern="dd.MM.yyyy">                                                 
                                                </p:calendar><br/>
                                                <p:calendar id="to" pattern="dd.MM.yyyy">                                                    
                                                </p:calendar>
                                            </f:facet>
                                            <h:outputText value="#{userevents.eventId.dataod}">
                                                <f:convertDateTime type="date" dateStyle="medium" />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Tytul" filterBy="#{userevents.eventId.tytul}" filterMatchMode="contains">
                                            #{userevents.eventId.tytul} 
                                        </p:column>
                                        <p:column headerText="Dystans">
                                            #{userevents.distance} 
                                        </p:column>
                                        <p:column headerText="Czas ruchu">
                                            #{userevents.duration} 
                                        </p:column>
                                        <p:column headerText="Wykonanie" style="width:80px;">                            
                                            <p:inputSwitch value="#{userevents.completed}" 
                                                           offLabel="Nie" onLabel="Tak"
                                                           disabled="true"
                                                           />
                                        </p:column>
                                    </p:dataTable>




                                </h:panelGrid>
                            </p:tab>
                            <p:tab title="Komentarze">

                            </p:tab>
                        </p:tabView>    



                    </div>
                </div>
            </div>

        </h:form>    

    </ui:define>

</ui:composition>